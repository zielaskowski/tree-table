function lev(t){let e=t.column(".path-col").index(),o=t.column(".button-col").index(),n=t.column(".onoff-col").index(),a="&oplus;",s="&CircleMinus;",l="|&mdash;";t.column(o).header().innerHTML="";let c=t.tables().nodes().to$().closest("div.datatables").attr("id"),r=JSON.parse($("script[data-for="+c+"][type='application/json']").text()),i=t.column(e).data().toArray().map((function(t){return t.match(/\//g)?.length??0})),d=Math.max(...i),u=new KolorWheel(r.x.options.color);u.l=100,u.s=10;let h=u.abs(-1,50,70,d+1);t.rows().every((function(){let e=this.nodes().to$(),n=this.index(),a=t.cell(n,o);e.css({backgroundColor:h.get(i[n]).getHex()}),h.get(i[n]).isDark()&&e.css({color:"white"}),a.nodes().to$().css({textIndent:10*i[n]+"%"}),a.data()!=l&&a.nodes().to$().css({cursor:"pointer"})})),$.fn.dataTable.ext.search.push((function(t,e,o){return 1==e[n]})),t.draw(),t.on("click","td.button-col",(function(){let c=t.row(this).index(),r=t.row(c).data();if(r[o].match(a)){r[o]=s;let a=new RegExp("^"+r[e]+"/{0,1}[^/]+$");t.rows().every((function(){let t=this.data();a.exec(t[e])&&(t[n]=1)}))}else if(r[o].match(s)){let s=new RegExp("^"+r[e]+"/.+$");t.rows().every((function(t){if(t<c)return;let r=this.data();r[o]!=l&&(r[o]=a),s.exec(r[e])&&(r[n]=0)}))}t.rows().invalidate().draw()}))}
